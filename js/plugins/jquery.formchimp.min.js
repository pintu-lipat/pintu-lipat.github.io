!function(a,b,c,d){a.fn.formchimp=function(e){var f=a(this),g=a("body"),h=f.attr("action").replace("/post?","/post-json?").concat("&c=?"),i=f.find('[type="submit"]'),o={appendElement:f,buttonSelector:i,buttonText:"",debug:!1,errorMessage:"",onMailChimpSuccess:function(){},onMailChimpError:function(){},responseClass:"mc-response",successMessage:"",url:h},p=o.buttonSelector.text();a.extend(o,e),a(f).on("submit",function(j){j.preventDefault(),g.removeClass("mc-success mc-error").addClass("mc-loading"),0===a("."+o.responseClass).length?$responseContainer=a("<div/>").addClass(o.responseClass).appendTo(o.appendElement):$responseContainer.html(""),a.ajax({url:o.url,data:f.serialize(),dataType:"jsonp"}).done(function(k){o.debug&&console.log(JSON.stringify(k));var l=k.msg;isNaN(l.charAt(0))||"-"!==l.charAt(2)||(l=l.substring(3)),g.addClass("mc-"+k.result).removeClass("mc-loading"),"success"===k.result?(""!==o.successMessage&&(l=o.successMessage),""!==o.buttonText&&o.buttonSelector.text(o.buttonText),a(c).trigger("mailChimpSuccess"),o.onMailChimpSuccess.call()):(""!==o.errorMessage&&(l=o.errorMessage),""!==o.buttonText&&o.buttonSelector.text(p),a(c).trigger("mailChimpError"),o.onMailChimpError.call()),$responseContainer.html(l)})})}}(jQuery,window,document);