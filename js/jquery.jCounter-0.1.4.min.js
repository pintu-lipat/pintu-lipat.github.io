(function(e,f,h,g){e.fn.jCounter=function(Y,G){var V="down";var N;var P,S,X,a;var Q=false;var R;var Z;var H=this;var J=this.length;var aa=new Array("DAYS","HOURS","MINUTES","SECONDS");var c=new Array("DAY","HOUR","MINUTE","SECOND");this.options=Y;this.version="0.1.4";var b={animation:null,callback:null,customDuration:null,customRange:null,date:null,debugLog:false,serverDateSource:"dateandtime.php",format:"dd:hh:mm:ss",timezone:"Europe/London",twoDigits:"on"};if(typeof Y==="object"){e.extend(b,Y);H.data("userOptions",b)}if(H.data("userOptions").debugLog==true&&h.console!==g){var I=true}var U={init:function(){H.each(function(j,i){T(i)})},pause:function(){if(I){console.log("(jC) Activity: Counter paused.")}Q=true;return H.each(function(j,i){clearInterval(e(i).data("jC_interval"))})},stop:function(){if(I){console.log("(jC) Activity: Counter stopped.")}Q=true;return H.each(function(j,i){clearInterval(e(i).data("jC_interval"));e(i).removeData("jC_pausedTime");ad(i)})},reset:function(){if(I){console.log("(jC) Activity: Counter reset.")}return H.each(function(j,i){clearInterval(e(i).data("jC_interval"));ad(i);T(i)})},start:function(){if(I){console.log("(jC) Activity: Counter started.")}return H.each(function(j,i){Z=e(i).data("jC_pausedTime");Q=false;clearInterval(e(i).data("jC_interval"));T(i)})}};if(H.data("userOptions").customDuration){if(!isNaN(H.data("userOptions").customDuration)){var L=true}else{var L=false;if(I){console.log("(jC) Error: The customDuration value is not a number! NOTE: 'customDuration' accepts a number of seconds.")}}}if(H.data("userOptions").customRange){var O=H.data("userOptions").customRange.split(":");var ab=parseInt(O[0]);var ac=parseInt(O[1]);if(!isNaN(ab)&&!isNaN(ac)){var M=true;if(ab>ac){var N=true}else{var N=false;V="up"}}else{var M=false;if(I){console.log("(jC) Error: The customRange value is not a valid range! Example: customRange: '0:30' or '30:0'")}}}if(H.data("userOptions").animation=="slide"){H.data("jCanimation","slide")}function T(j){if(L){if(Z){if(!isNaN(Z)){R=Math.round(Z)}}else{R=Math.round(e(j).data("userOptions").customDuration)}i=0;K(i,j);e(j).data("jC_interval",setInterval(function(){if(Q==false){i=parseInt(i)+1;K(i,j)}},1000))}else{if(M){R=Math.round(O[1]);if(Z){if(!isNaN(Z)){var i=R-Z}}else{var i=Math.round(O[0])}K(i,j);e(j).data("jC_interval",setInterval(function(){if(Q==false){var k=(N)?i=parseInt(i)-1:i=parseInt(i)+1;K(i,j)}},1000))}else{R=Date.parse(e(j).data("userOptions").date)/1000;dateSource=H.data("userOptions").serverDateSource+"?timezone="+H.data("userOptions").timezone+"&callback=?";e.ajax({url:dateSource,dataType:"json",data:{},success:function(l,m){var k=Date.parse(l.currentDate)/1000;d(k,j)},error:function(){if(I){console.log("(jC) Error: Couldn't find dateandtime.php from serverDateSource: "+H.data("userOptions").serverDateSource+"\n(jC) - Make sure the path is correct! \n(jC) - Now using the client-side time (not recommended).")}var k=Math.floor(e.now()/1000);d(k,j)}})}}}function d(i,j){K(i,j);if(R>i){e(j).data("jC_interval",setInterval(function(){if(Q==false){i=parseInt(i)+1;K(i,j)}},1000))}else{ad(j)}}function W(j,m,l,k,i){e(j).find(m+" u").each(function(o,n){var q=(H.data("userOptions").twoDigits=="on")?"0":"";var p=(V=="up")?p=-o:p=o;currNo=parseInt(l,10)+(p);if(String(parseInt(l,10)).length>=2){e(n).text(parseInt(l,10)+(p))}else{if(String(parseInt(l,10)).length==1&&currNo==10){e(n).text(parseInt(l,10)+(p))}else{e(n).text(q+(parseInt(l,10)+(p)))}}});e(j).find(m).animate({top:"0.15em"},200,function(){e(j).find(m+" u:eq(1)").remove();e(j).find(m).prepend("<u></u>");e(j).find(m).css({top:"-1.24em"})})}function ad(i){if(H.data("userOptions").twoDigits=="on"){e(i).find(".days,.hours,.minutes,.seconds").text("00")}else{if(H.data("userOptions").twoDigits=="off"){e(i).find(".days,.hours,.minutes,.seconds").text("0")}}if(H.data("jCanimation")=="slide"){e(i).find(".daysSlider u,.hoursSlider u,.minutesSlider u,.secondsSlider u").text("00")}}function K(j,k){if(N){if(R>=j){clearInterval(e(k).data("jC_interval"));if(H.data("userOptions").callback){H.data("userOptions").callback.call(this)}}}else{if(R<=j){clearInterval(e(k).data("jC_interval"));if(H.data("userOptions").callback){H.data("userOptions").callback.call(this)}}}var n=(M)?j:R-j;var o=H.data("userOptions").format;if(o.indexOf("dd")!=-1){var i=Math.floor(n/(60*60*24));n-=i*60*60*24}if(o.indexOf("hh")!=-1){var l=Math.floor(n/(60*60));n-=l*60*60}if(o.indexOf("mm")!=-1){var m=Math.floor(n/60);n-=m*60}if(o.indexOf("ss")==-1){n-=n}if(i==1){e(k).find(".textDays").text(c[0])}else{e(k).find(".textDays").text(aa[0])}if(l==1){e(k).find(".textHours").text(c[1])}else{e(k).find(".textHours").text(aa[1])}if(m==1){e(k).find(".textMinutes").text(c[2])}else{e(k).find(".textMinutes").text(aa[2])}if(n==1){e(k).find(".textSeconds").text(c[3])}else{e(k).find(".textSeconds").text(aa[3])}if(H.data("userOptions").twoDigits=="on"){i=(String(i).length>=2)?i:"0"+i;l=(String(l).length>=2)?l:"0"+l;m=(String(m).length>=2)?m:"0"+m;n=(String(n).length>=2)?n:"0"+n}if(!isNaN(R)){e(k).find(".days").text(i);e(k).find(".hours").text(l);e(k).find(".minutes").text(m);e(k).find(".seconds").text(n);if(H.data("jCanimation")=="slide"){e(k).find(".daysSlider u:eq(1)").text(i);e(k).find(".hoursSlider u:eq(1)").text(l);e(k).find(".minutesSlider u:eq(1)").text(m);e(k).find(".secondsSlider u:eq(1)").text(n);W(k,".secondsSlider",n,R,j);if(parseInt(n,10)==59){W(k,".minutesSlider",m,R,j);if(parseInt(m,10)==59){W(k,".hoursSlider",l,R,j);if(parseInt(l,10)==23){W(k,".daysSlider",i,R,j)}}}}}else{if(I){console.log("(jC) Error: Invalid date! Here's an example: 01 January 1970 12:00:00")}clearInterval(e(k).data("jC_interval"))}e(k).data("jC_pausedTime",R-j)}if(U[this.options]){return U[this.options].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof this.options==="object"||!this.options){return U.init.apply(this,arguments)}else{console.log("(jC) Error: Method >>> "+this.options+" <<< does not exist.")}}}})(jQuery,document,window);